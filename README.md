# ChatFlow - å®æ—¶å³æ—¶é€šè®¯åº”ç”¨

ä¸€ä¸ªåŸºäº React + Socket.io + SQLite æ„å»ºçš„ç°ä»£åŒ–å®æ—¶å³æ—¶é€šè®¯åº”ç”¨ï¼Œæ”¯æŒç§èŠã€ç¾¤èŠã€æ–‡ä»¶ä¼ è¾“ç­‰åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **å®æ—¶é€šè®¯**: åŸºäº Socket.io çš„å®æ—¶æ¶ˆæ¯ä¼ è¾“
- ğŸ’¬ **å¤šç§èŠå¤©**: æ”¯æŒç§èŠå’Œç¾¤èŠåŠŸèƒ½  
- ğŸ“ **æ–‡ä»¶ä¼ è¾“**: æ”¯æŒå„ç§æ–‡ä»¶ç±»å‹çš„å‘é€
- ğŸ” **ç”¨æˆ·è®¤è¯**: å®‰å…¨çš„ç”¨æˆ·æ³¨å†Œå’Œç™»å½•ç³»ç»Ÿ
- ğŸ“± **å“åº”å¼è®¾è®¡**: é€‚é…å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸
- ğŸ¨ **ç°ä»£UI**: ç®€æ´ç¾è§‚çš„ç”¨æˆ·ç•Œé¢

## ğŸ†• v2.4.0 æ–°åŠŸèƒ½

### ğŸ¯ APIè¿æ¥ä¿®å¤
- âœ… **å½»åº•è§£å†³"Failed to fetch"é”™è¯¯**
- âœ… **åŠ¨æ€APIåœ°å€æ£€æµ‹** - è‡ªåŠ¨é€‚é…éƒ¨ç½²ç¯å¢ƒ
- âœ… **æ™ºèƒ½CORSé…ç½®** - è‡ªåŠ¨ä¿®å¤è·¨åŸŸé—®é¢˜
- âœ… **è¿æ¥çŠ¶æ€è¯Šæ–­** - è¯¦ç»†çš„æ•…éšœæ’é™¤ä¿¡æ¯

### ğŸ”§ æ™ºèƒ½ç«¯å£ç®¡ç†
- âœ… **è‡ªåŠ¨ç«¯å£åˆ†é…** - 5000-6000èŒƒå›´å†…è‡ªåŠ¨é€‰æ‹©
- âœ… **ç«¯å£å†²çªå¤„ç†** - è‡ªåŠ¨åˆ†é…éšæœºç«¯å£(8000-9999)
- âœ… **åŠ¨æ€ç«¯å£æ˜¾ç¤º** - cfå‘½ä»¤å®æ—¶æ˜¾ç¤ºå½“å‰ç«¯å£

### ğŸ“ˆ éƒ¨ç½²ä½“éªŒä¼˜åŒ–
- âœ… **è‡ªåŠ¨è¿æ¥æµ‹è¯•** - éƒ¨ç½²åè‡ªåŠ¨éªŒè¯APIå’ŒSocketè¿æ¥
- âœ… **æ•…éšœè‡ªåŠ¨ä¿®å¤** - æ£€æµ‹é—®é¢˜å¹¶è‡ªåŠ¨åº”ç”¨è§£å†³æ–¹æ¡ˆ
- âœ… **è¯¦ç»†çŠ¶æ€æŠ¥å‘Š** - å®Œæ•´çš„éƒ¨ç½²å’Œè¿æ¥çŠ¶æ€ä¿¡æ¯

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- React 18
- Socket.io-client
- Styled Components
- React Router

### åç«¯  
- Node.js
- Express
- Socket.io
- SQLite
- JWT è®¤è¯

## ğŸš€ ä¸€é”®éƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚
- Ubuntu 18.04+ / Debian 10+ / CentOS 7+ / Alpine Linux
- 2GB+ RAM
- 10GB+ å¯ç”¨ç£ç›˜ç©ºé—´
- root æƒé™

### å¿«é€Ÿéƒ¨ç½²
```bash
curl -sSL https://raw.githubusercontent.com/KaiGe7384/chatflow/main/deploy.sh | bash
```

### å¿«é€Ÿå¸è½½
```bash
# æ–¹æ³•1ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬å¸è½½
curl -sSL https://raw.githubusercontent.com/KaiGe7384/chatflow/main/deploy.sh | bash -s uninstall

# æ–¹æ³•2ï¼šä½¿ç”¨cfå‘½ä»¤å¸è½½ï¼ˆéƒ¨ç½²å®Œæˆåï¼‰
cf uninstall
```

### éƒ¨ç½²ç‰¹æ€§
- ğŸ” **æ™ºèƒ½ç³»ç»Ÿæ£€æµ‹**: è‡ªåŠ¨è¯†åˆ« Ubuntu/Debianã€CentOS/RHELã€Alpine Linux
- ğŸ“¦ **ä¾èµ–è‡ªåŠ¨å®‰è£…**: Node.js 18+ã€npmã€gitã€pm2 ç­‰
- ğŸ›¡ï¸ **æ— äº¤äº’å®‰è£…**: å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
- ğŸ”„ **æ–­ç‚¹ç»­ä¼ **: å¤±è´¥åå¯é‡æ–°è¿è¡Œï¼Œæ™ºèƒ½è·³è¿‡å·²å®Œæˆæ­¥éª¤
- ğŸ¯ **APIè¿æ¥ä¿®å¤**: è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤APIè¿æ¥é—®é¢˜

## ğŸ® ç®¡ç†å‘½ä»¤

éƒ¨ç½²å®Œæˆåï¼Œå¯ä½¿ç”¨å†…ç½®çš„ `cf` å‘½ä»¤è¿›è¡Œåº”ç”¨ç®¡ç†ï¼š

```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
cf status

# å¯åŠ¨/åœæ­¢/é‡å¯åº”ç”¨
cf start
cf stop  
cf restart

# æŸ¥çœ‹æ—¥å¿—
cf logs              # å®æ—¶æ—¥å¿—
cf logs -e           # é”™è¯¯æ—¥å¿—

# åº”ç”¨ä¿¡æ¯
cf info              # æ˜¾ç¤ºè®¿é—®åœ°å€å’Œè´¦å·ä¿¡æ¯

# æ›´æ–°åº”ç”¨
cf update            # ä»GitHubæ‹‰å–æœ€æ–°ä»£ç å¹¶é‡å¯

# ç›‘æ§æ¨¡å¼
cf monitor           # è¿›å…¥PM2ç›‘æ§ç•Œé¢

# å¸è½½åº”ç”¨
cf uninstall         # å®Œå…¨å¸è½½ChatFlow

# å¸®åŠ©ä¿¡æ¯
cf help
```

## ğŸ“± ä½¿ç”¨æ–¹æ³•

### 1. è®¿é—®åº”ç”¨
éƒ¨ç½²æˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- æœ¬åœ°è®¿é—®: `http://localhost:5000`
- å¤–ç½‘è®¿é—®: `http://æœåŠ¡å™¨IP:5000`

### 2. æµ‹è¯•è´¦å·
```
ç”¨æˆ·å: test1  å¯†ç : 123456
ç”¨æˆ·å: test2  å¯†ç : 123456
```

### 3. åŠŸèƒ½è¯´æ˜
- **æ³¨å†Œ/ç™»å½•**: åˆ›å»ºè´¦å·æˆ–ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•
- **ç§èŠ**: ç‚¹å‡»ç”¨æˆ·åˆ—è¡¨ä¸­çš„ç”¨æˆ·å¼€å§‹ç§èŠ
- **ç¾¤èŠ**: åˆ›å»ºæˆ–åŠ å…¥ç¾¤ç»„è¿›è¡Œç¾¤èŠ
- **æ–‡ä»¶å‘é€**: æ‹–æ‹½æ–‡ä»¶æˆ–ç‚¹å‡»ä¸Šä¼ æŒ‰é’®å‘é€æ–‡ä»¶
- **å®æ—¶é€šçŸ¥**: æ¥æ”¶æ–°æ¶ˆæ¯çš„å®æ—¶æé†’

## ğŸ”§ æ‰‹åŠ¨éƒ¨ç½²

å¦‚éœ€æ‰‹åŠ¨éƒ¨ç½²ï¼Œè¯·å‚è€ƒä»¥ä¸‹æ­¥éª¤ï¼š

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/KaiGe7384/chatflow.git
cd chatflow
```

### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–
npm install

# å®‰è£…åç«¯ä¾èµ–
cd server && npm install && cd ..

# å®‰è£…å‰ç«¯ä¾èµ–  
cd client && npm install && cd ..
```

### 3. æ„å»ºå‰ç«¯
```bash
cd client
npm run build
cd ..
```

### 4. é…ç½®ç¯å¢ƒ
```bash
# åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
cat > server/.env << EOF
PORT=5000
JWT_SECRET=your-secret-key
NODE_ENV=production
EOF
```

### 5. å¯åŠ¨åº”ç”¨
```bash
# ä½¿ç”¨PM2å¯åŠ¨
npm install -g pm2
pm2 start ecosystem.config.js
pm2 save
```

## ğŸ› æ•…éšœæ’é™¤

### åº”ç”¨æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
cf status
pm2 status chatflow

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
cf logs -e
pm2 logs chatflow --err

# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep 5000

# é‡å¯åº”ç”¨
cf restart
```

### é˜²ç«å¢™é…ç½®
```bash
# Ubuntu/Debian (UFW)
sudo ufw allow 5000
sudo ufw reload

# CentOS/RHEL (firewalld)
sudo firewall-cmd --permanent --add-port=5000/tcp
sudo firewall-cmd --reload

# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
sudo ufw status           # Ubuntu/Debian
sudo firewall-cmd --list-ports  # CentOS/RHEL
```

### é‡æ–°éƒ¨ç½²
```bash
# å¦‚é‡åˆ°é—®é¢˜ï¼Œå¯é‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬
curl -sSL https://raw.githubusercontent.com/KaiGe7384/chatflow/main/deploy.sh | bash

# æˆ–è€…å…ˆå¸è½½å†é‡æ–°å®‰è£…
cf uninstall
curl -sSL https://raw.githubusercontent.com/KaiGe7384/chatflow/main/deploy.sh | bash
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
chatflow/
â”œâ”€â”€ client/          # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/          # Node.js åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ index.js     # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ routes/      # API è·¯ç”±
â”‚   â”œâ”€â”€ middleware/  # ä¸­é—´ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ deploy.sh        # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ ecosystem.config.js  # PM2 é…ç½®æ–‡ä»¶
â””â”€â”€ README.md
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issues å’Œ Pull Requests æ¥å¸®åŠ©æ”¹è¿›é¡¹ç›®ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ¯ ç‰ˆæœ¬ä¿¡æ¯

**å½“å‰ç‰ˆæœ¬**: v2.1.0

### æ›´æ–°æ—¥å¿—
- **v2.1.0**: å¢å¼ºéƒ¨ç½²è„šæœ¬ï¼Œæ·»åŠ é”™è¯¯é¢„é˜²æœºåˆ¶å’Œå®Œæ•´è¯Šæ–­åŠŸèƒ½
- **v2.0.0**: é‡å¤§æ›´æ–°ï¼Œæ–°å¢è‡ªåŠ¨IPæ£€æµ‹ã€å¼€æœºè‡ªå¯åŠ¨ã€cfç®¡ç†å‘½ä»¤
- **v1.0.0**: åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€å³æ—¶é€šè®¯åŠŸèƒ½

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼** 