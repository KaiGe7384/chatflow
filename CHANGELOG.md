# ChatFlow 更新日志

## v2.4.0 (2024-12-19)

### 🎯 主要修复
- **修复API连接问题**: 解决前端"Failed to fetch"错误
  - 前端API地址动态检测，不再硬编码端口
  - 自动适配开发和生产环境的API配置
  - 增强错误处理和调试信息

### 🔧 技术改进  
- **动态服务器地址配置**
  - API服务和Socket.io连接自动检测当前访问地址
  - 支持代理和直连两种部署方式
  - 开发环境支持环境变量配置

- **增强CORS配置**
  - 部署脚本自动检测并修复CORS配置
  - 支持跨域请求和WebSocket连接
  - 添加OPTIONS预检请求支持

- **智能端口管理**
  - 自动检测可用端口(5000-6000范围)
  - 端口冲突时自动分配随机端口(8000-9999)
  - cf命令动态显示实际使用端口

### 📈 部署优化
- **API连接测试**: 部署后自动测试API和Socket连接
- **自动修复机制**: 检测到问题时自动应用修复
- **详细状态报告**: 提供完整的连接状态和故障诊断

### 🛠️ 代码重构
- 统一使用`apiService`替代硬编码fetch请求
- 移除组件中的重复API地址配置
- 优化错误处理和用户体验

### 🎨 用户体验
- 更清晰的错误提示信息
- 自动重连和故障恢复
- 详细的部署和连接状态显示

---

## v2.3.0 (2024-12-19)

### 新功能
- 自动端口分配 (5000-6000范围，支持随机端口)
- API代理配置，解决"Failed to fetch"问题  
- 前端构建时设置API_URL环境变量
- setupProxy.js代理文件自动生成
- cf命令支持动态端口信息显示
- 优化静态文件服务和SPA路由处理

---

## v2.2.1 (2024-12-18)

### 修复
- 前端静态文件服务问题
- PM2进程管理优化
- 统一cf命令管理

### 改进
- 完善部署验证机制
- 增强错误处理

---

## v2.1.0 (2024-12-18)

### 新功能
- 一键部署脚本
- PM2进程管理
- 基础cf命令工具

### 特性
- 多系统支持 (Ubuntu/Debian, CentOS/RHEL, Alpine)
- 自动依赖安装
- 基础应用管理 